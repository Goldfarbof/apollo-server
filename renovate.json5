{
  "extends": [
    "apollo-open-source"
  ],
  "force": {
    "constraints": {
      "node": "< 15.0.0"
    }
  },
  "dependencyDashboard": true,
  "automerge": false,
  "baseBranches": ["main", "release-3.0"],
  "packageRules": [
    {
      "matchPackageNames": ["@types/node"],
      "allowedVersions": "12.x"
    },
    /*
     * Apollo Server 3.x rules
     *
     * Essentially, we want to update Apollo whenever its possible!
     *
     */
    {
      "matchPaths": [
        "v3/package.json"
      ],
      "packageRules": [
        {
          "matchPackagePatterns": ["^apollo-"],
          "schedule": ["at any time"],
          "automerge": true,
          "automergeType": "branch",
          "groupName": "v3"
        },
      ],
    },

    /*
      Docs-related Renovate rules

      These ensure that the `docs/` folder, which is its own application with
      its own dependencies which lives inside this repository, plays by its
      own Renovate rules.  Those rules are defined within the external (npm)
      package called `renovate-config-apolllo-docs` (defined here only by
      the `apollo-docs` suffix).
    */
    {
      "matchPaths": [
        "docs/package.json"
      ],
      "extends": [
        "apollo-docs"
      ],
      // We need to tell Renovate to check the branches for each major version
      // of Apollo Server.  "Past" major versions should be added here!
      "baseBranches": [
        "main",
        "version-2"
      ]
    }
  ]
}
